    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ðŸŒ± Sistema de Riego Automatizado</title>
        <style>
            :root {
                --primary-color: #2e7d32;
                --secondary-color: #81c784;
                --accent-color: #ff8f00;
                --text-color: #333;
                --light-gray: #f5f5f5;
                --medium-gray: #e0e0e0;
                --dark-gray: #757575;
            }
            
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background-color: var(--light-gray);
                padding: 20px;
                color: var(--text-color);
                line-height: 1.6;
            }
            
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }
            
            header {
                text-align: center;
                margin-bottom: 30px;
                padding: 20px;
                background-color: white;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            
            h1 {
                color: var(--primary-color);
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
            }
            
            .icon {
                width: 24px;
                height: 24px;
                vertical-align: middle;
                margin-right: 8px;
            }
            
            .subtitle {
                color: var(--dark-gray);
                font-size: 1.1em;
            }
            
            .status-cards {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-bottom: 30px;
                flex-wrap: wrap;
            }
            
            .card {
                background-color: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                text-align: center;
                min-width: 200px;
                flex: 1;
            }
            
            .card h3 {
                margin-top: 0;
                color: var(--primary-color);
            }
            
            .card .value {
                font-size: 2em;
                font-weight: bold;
                margin: 10px 0;
            }
            
            .card .humidity {
                color: #1976d2;
            }
            
            .card .irrigation-true {
                color: var(--primary-color);
            }
            
            .card .irrigation-false {
                color: var(--accent-color);
            }
            
            table {
                width: 100%;
                margin: 20px auto;
                border-collapse: collapse;
                background-color: white;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                border-radius: 8px;
                overflow: hidden;
            }
            
            th, td {
                padding: 15px;
                text-align: center;
                border-bottom: 1px solid var(--medium-gray);
            }
            
            th {
                background-color: var(--primary-color);
                color: white;
                font-weight: 600;
                text-transform: uppercase;
                font-size: 0.9em;
                letter-spacing: 0.5px;
            }
            
            tr:hover {
                background-color: rgba(129, 199, 132, 0.1);
            }
            
            .riego-true {
                color: var(--primary-color);
                font-weight: bold;
            }
            
            .riego-false {
                color: var(--accent-color);
                font-weight: bold;
            }
            
            .actions {
                display: flex;
                gap: 10px;
                justify-content: center;
            }
            
            .btn {
                padding: 6px 12px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.9em;
                transition: all 0.3s;
            }
            
            .btn-delete {
                background-color: #f44336;
                color: white;
            }
            
            .btn:hover {
                opacity: 0.8;
                transform: translateY(-2px);
            }
            
            .footer {
                text-align: center;
                margin-top: 40px;
                font-size: 0.9em;
                color: var(--dark-gray);
                padding: 20px;
            }
            
            .last-update {
                text-align: right;
                font-size: 0.8em;
                color: var(--dark-gray);
                margin-bottom: 20px;
            }
            
            @media (max-width: 768px) {
                .status-cards {
                    flex-direction: column;
                }
                
                th, td {
                    padding: 10px 5px;
                    font-size: 0.9em;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>
                    <svg class="icon" viewBox="0 0 24 24" fill="#2e7d32">
                        <path d="M12,3.25C12,3.25 6,10 6,14C6,17.32 8.69,20 12,20A6,6 0 0,0 18,14C18,10 12,3.25 12,3.25M14.47,9.97L15.53,11.03L9.53,17.03L8.47,15.97M9.75,10A1.25,1.25 0 0,1 11,11.25A1.25,1.25 0 0,1 9.75,12.5A1.25,1.25 0 0,1 8.5,11.25A1.25,1.25 0 0,1 9.75,10M14.25,14.5A1.25,1.25 0 0,1 15.5,15.75A1.25,1.25 0 0,1 14.25,17A1.25,1.25 0 0,1 13,15.75A1.25,1.25 0 0,1 14.25,14.5Z" />
                    </svg>
                    Sistema de Riego Automatizado
                </h1>
                <p class="subtitle">MonitorizaciÃ³n en tiempo real de los niveles de humedad</p>
            </header>
            
            <div class="status-cards">
                {% if lecturas and lecturas[0] %}
                <div class="card">
                    <h3>
                        <svg class="icon" viewBox="0 0 24 24" fill="#1976d2">
                            <path d="M12,3.25C12,3.25 6,10 6,14C6,17.32 8.69,20 12,20A6,6 0 0,0 18,14C18,10 12,3.25 12,3.25M14.47,9.97L15.53,11.03L9.53,17.03L8.47,15.97M9.75,10A1.25,1.25 0 0,1 11,11.25A1.25,1.25 0 0,1 9.75,12.5A1.25,1.25 0 0,1 8.5,11.25A1.25,1.25 0 0,1 9.75,10M14.25,14.5A1.25,1.25 0 0,1 15.5,15.75A1.25,1.25 0 0,1 14.25,17A1.25,1.25 0 0,1 13,15.75A1.25,1.25 0 0,1 14.25,14.5Z" />
                        </svg>
                        Ãšltima Humedad
                    </h3>
                    <div class="value humidity">{{ lecturas[0].humedad }}%</div>
                    <p>Nivel actual del suelo</p>
                </div>
                
                <div class="card">
                    <h3>
                        <svg class="icon" viewBox="0 0 24 24" fill="{% if lecturas[0].riego %}var(--primary-color){% else %}var(--accent-color){% endif %}">
                            <path d="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z" />
                        </svg>
                        Estado de Riego
                    </h3>
                    <div class="value {% if lecturas[0].riego %}irrigation-true{% else %}irrigation-false{% endif %}">
                        {% if lecturas[0].riego %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="#2e7d32" style="vertical-align: middle;">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                            </svg> ACTIVO
                        {% else %}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="#ff8f00" style="vertical-align: middle;">
                                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                            </svg> INACTIVO
                        {% endif %}
                    </div>
                    <p>Estado del sistema</p>
                </div>
                
                <div class="card">
                    <h3>
                        <svg class="icon" viewBox="0 0 24 24" fill="#757575">
                            <path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" />
                        </svg>
                        Ãšltima ActualizaciÃ³n
                    </h3>
                    <div class="value">{{ lecturas[0].fecha.strftime('%H:%M') }}</div>
                    <p>{{ lecturas[0].fecha.strftime('%d/%m/%Y') }}</p>
                </div>
                {% endif %}
            </div>
            
            <div class="last-update">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#757575" style="vertical-align: middle;">
                    <path d="M11,8H13V14H11V8M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16H13V18H11V16Z" />
                </svg>
                Actualizado: {{ now.strftime('%d/%m/%Y %H:%M:%S') }}
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="white" style="vertical-align: middle;">
                                <path d="M12,3.25C12,3.25 6,10 6,14C6,17.32 8.69,20 12,20A6,6 0 0,0 18,14C18,10 12,3.25 12,3.25M14.47,9.97L15.53,11.03L9.53,17.03L8.47,15.97M9.75,10A1.25,1.25 0 0,1 11,11.25A1.25,1.25 0 0,1 9.75,12.5A1.25,1.25 0 0,1 8.5,11.25A1.25,1.25 0 0,1 9.75,10M14.25,14.5A1.25,1.25 0 0,1 15.5,15.75A1.25,1.25 0 0,1 14.25,17A1.25,1.25 0 0,1 13,15.75A1.25,1.25 0 0,1 14.25,14.5Z" />
                            </svg>
                            Humedad
                        </th>
                        <th>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="white" style="vertical-align: middle;">
                                <path d="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z" />
                            </svg>
                            Riego
                        </th>
                        <th>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="white" style="vertical-align: middle;">
                                <path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" />
                            </svg>
                            Fecha
                        </th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for lectura in lecturas %}
                    <tr>
                        <td>{{ lectura.id }}</td>
                        <td>{{ lectura.humedad }}%</td>

                        <td class="{% if lectura.riego %}riego-true{% else %}riego-false{% endif %}">
                            {% if lectura.riego %}
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="#2e7d32" style="vertical-align: middle;">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" />
                                </svg> Activado
                            {% else %}
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="#ff8f00" style="vertical-align: middle;">
                                    <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                                </svg> Desactivado
                            {% endif %}
                        </td>
                        <td>{{ lectura.fecha.strftime('%d/%m/%Y %H:%M') }}</td>
                        <td class="actions">
                            <button class="btn btn-delete" onclick="deleteReading('{{ lectura.id }}')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="white" style="vertical-align: middle;">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
                                </svg>
                                Eliminar
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <script>
            function deleteReading(id) {
                if (confirm('Â¿EstÃ¡s seguro de que deseas eliminar esta lectura?')) {
                    fetch(`/lectura/${id}`, {
                        method: 'DELETE',
                    })
                    .then(response => {
                        if (response.ok) {
                            alert('Lectura eliminada correctamente');
                            location.reload();
                        } else {
                            alert('Error al eliminar la lectura');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error al conectar con el servidor');
                    });
                }
            }
            
        </script>
    </body>
    </html>


